<!-- Elements 1 view -->
<div ng-controller="ElementController">
    <h2 class="page-subtitle" ng-show="headline" ng-bind="headline"></h2> 
    <div class="row">
        <div class="alert alert-warning" ng-show="collection.length < 1" ng-bind="'No element found'" ng-cloak></div>
        <div id="Widget_{{v.id}}" class="col-lg-4 col-md-6 col-sm-6 widget-entry" ng-repeat="v in collection| filter:q">
            <div class="widget-block {{v.deviceType}}" ng-switch="v.deviceType">
                <div class="widget-block-in clearfix app-border app-gradient app-shadow">
                    <!-- Widget icon -->
                    <img ng-if="v.deviceType === 'text'" ng-show="v.metrics.img" class="widget-image" ng-src="{{v.metrics.img}}" alt="{{v.title}}"/>
                    <img ng-if="v.deviceType !== 'text'" class="widget-image" ng-src="{{v.icon|getElementIcon:v}}" alt="{{v.title}}"/>

                    <!-- Widget header -->
                    <div class="widget-header">
                        <a class="widget-history" href="" ng-click="goHistory = !goHistory" ng-show="history[v.id]"><i class="fa fa-bar-chart"></i></a>
                        <a class="widget-config" href="" 
                           ng-click="showModal('#modal_widget', {
                                       'id': v.id,
                                               'title': v.title,
                                               'dashboard': v.onDashboard == true ? true : false,
                                               'location': v.location,
                                               'tags': v.tags,
                                               'deviceType': v.deviceType,
                                               'level': v.level,
                                               'metrics': v.metrics,
                                               'updateTime': v.updateTime,
                                               'cfg': v.cfg,
                                               'permanently_hidden': v.permanently_hidden,
                                               'rooms': rooms
                                       })"
                           ><i class="fa fa-cog fa-lg"></i></a>
                    </div>

                    <!-- Widget body -->
                    <div class="widget-body" ng-class="{'text-widget': v.deviceType == 'text','text-widget-no-img': v.deviceType == 'text' && v.metrics.img == ''}" ng-init="levelVal[v.id] = v.level" ng-click="goHidden = true;" ng-mouseleave="goHidden = false;">
                        
                        <h3 class="entry-title" title="{{v.title}}">{{v.title}}</h3>
                        <!-- <h3 class="entry-title"><a href="" ng-click="showModal('#modal_promo', {'title': v.title})" ng-bind="v.title"></a> &raquo;</h3> -->
                        <!--<i>{{v.icon}}, {{v.deviceType}}</i> -->
                        
                        <!-- Hidden sensorMultilevel -->
                        <div class="col-sm-11 element-hidden hidden-history" ng-show="goHistory">
                            <a class="hidden-close" href="" ng-click="goHistory = !goHistory"><i class="fa fa-times"></i></a>
                            <p class="popup-title">{{v.title|cutText:true:30}}</p>
                            <div>
                                <canvas tc-chartjs-line chart-data="history[v.id]" chart-options="chartOptions" width="260" height="150"></canvas>
                            </div>
                        </div>
                       
                        <div class="widget-control-wrap">
                             <!------------ switchMultilevel ------------>
                            <div ng-switch-when="switchMultilevel">
                                <div class="widget-control control-left widget-click-popup">
                                    <span class="widget-level" ng-bind="levelVal[v.id] | getMaxLevel"></span> % <i class="fa fa-caret-down"></i>
                                </div>
                                <div class="widget-control control-right" ng-if="v.metrics.icon == 'blinds'">
                                   <div class="btn-group">
                                    <button 
                                        class="btn btn-sm widget-btn-off" 
                                        id="btn_off_{{ v.id}}"
                                        data-ng-click="runCmd(v.id + '/command/off')"
                                        ng-class="v.level < 1 ? 'btn-primary': 'btn-default'"
                                        ng-bind="_t('lb_down')"></button>
                                    <button 
                                        class="btn btn-sm widget-btn-on" 
                                        id="btn_on_{{ v.id}}"
                                        data-ng-click="runCmd(v.id + '/command/on');goHidden = false;"
                                        ng-class="v.level > 0 ? 'btn-primary': 'btn-default'"
                                        ng-bind="_t('lb_up')"></button>
                                </div>
                                 </div>
                               
                            </div>

                            <!------------ switchBinary ------------>
                            <div ng-switch-when="switchBinary">
                                <div class="widget-control control-left widget-click-popup-chart">
                                    
                                </div>
                               <div class="widget-control control-right">
                                <div class="btn-group">
                                    <button 
                                        class="btn btn-sm widget-btn-off" 
                                        id="btn_off_{{ v.id}}"
                                        data-ng-click="runCmd(v.id + '/command/off')"
                                        ng-class="v.level=='off' ? 'btn-primary': 'btn-default'"
                                        ng-bind="_t('lb_off')"></button>
                                    <button 
                                        class="btn btn-sm widget-btn-on" 
                                        id="btn_on_{{ v.id}}"
                                        data-ng-click="runCmd(v.id + '/command/on')"
                                        ng-class="v.level=='on' ? 'btn-primary': 'btn-default'"
                                        ng-bind="_t('lb_on')"></button>
                                </div>
                               </div>
                            </div><!-- /.widget-control .right --> 

                            <!------------ switchRGBW ------------>
                            <div  ng-switch-when="switchRGBW" ng-init="rgbVal[v.id] = v.rgbColors">
                                <div cmdurl="{{cfg.server_url + cfg.api_url}}devices/{{v.id}}/command/exact" class="widget-control control-left widget-click-popup" colorpicker="rgb" ng-model="rgbVal[v.id]" ng-click="showColor = !showColor">
                                    <span class="color-picker-show" style="background-color: {{rgbVal[v.id]}};">&nbsp;</span> <span>RGB <i class="fa fa-caret-down"></i></span>
                                </div>
                                <div class="widget-control control-right">
                                    <!--<div class="btn-group" ng-show="showColor">
                                     <button class="btn btn-primary btn-sm" ng-click="setRBGColor(v.id,rgbVal[v.id]);showColor = !showColor">Update</button>
                                     <button class="btn btn-default btn-sm" ng-click="resetRBGColor(v.id,v.rgbColorsSDefault);showColor = !showColor">Cancel</button>
                                      </div>--> 
                                    <div class="btn-group"> 
                                       
                                        <button 
                                            class="btn widget-btn-off btn-sm" 
                                            id="btn_off_{{ v.id}}"
                                            ng-class="v.level=='off' ? 'btn-primary': 'btn-default'"
                                            data-ng-click="runCmd(v.id + '/command/off')"
                                            ng-bind="_t('lb_off')"></button>
                                        <button 
                                            class="btn widget-btn-on btn-sm" 
                                            id="btn_on_{{ v.id}}"
                                            ng-class="v.level=='on' ? 'btn-primary': 'btn-default'"
                                            data-ng-click="runCmd(v.id + '/command/on')"
                                            ng-bind="_t('lb_on')"></button>
                                    </div>
                                </div><!-- /.widget-control .right --> 
                            </div><!-- /switchRGBW --> 
                            <!------------ /switchRGBW ------------>

                            <!-- doorlock -->
                            <div class="widget-control control-right" ng-switch-when="doorlock">
                                <div class="btn-group">
                                    <button 
                                        class="btn widget-btn-off btn-sm"
                                        ng-class="v.level=='closed' ? 'btn-primary': 'btn-default'"
                                        data-ng-click="runCmd(v.id + '/command/off')"
                                        ><i class="fa fa-lock"></i>
                                    </button>
                                    <button 
                                        class="btn widget-btn-on btn-sm"
                                        ng-class="v.level=='open' ? 'btn-primary': 'btn-default'"
                                        data-ng-click="runCmd(v.id + '/command/on')"
                                        ><i class="fa fa-unlock"></i>
                                    </button>
                                </div>
                            </div><!-- /.widget-control .right --> 

                            <!-- toggleButton -->
                            <div class="widget-control control-right" ng-switch-when="toggleButton">
                                <div class="btn-group">
                                    <button 
                                        class="btn btn-primary btn-sm" 
                                        id="btn_off_{{ v.id}}"
                                        data-ng-click="runCmd(v.id + '/command/on')"
                                        ><i class="fa fa-power-off fa-lg"></i></button>
                                    <!--<a href=""><i class="fa fa-toggle-on fa-2x text-primary"></i></a> -->
                                </div>
                            </div><!-- /.widget-control .right --> 

                            <!-- sensorMultilevel -->
                            <div  ng-switch-when="sensorMultilevel">
                                <div class="widget-control control-left widget-click-popup">
                                    <span class="widget-level" ng-bind="v.level"></span> <span ng-show="v.scaleTitle" ng-bind="v.scaleTitle"></span>
                                </div>

                                <div class="widget-control control-right">
                                    <div class="btn-group">
                                        <button class="btn btn-default btn-sm" ng-click="runCmd(v.id + '/command/update')"> <i class="fa fa-clock-o"></i> <span class="widget-update-time">{{v.updateTime|isToday:true}}</span></button>
                                    </div>
                                </div><!-- /.widget-control .right -->
                            </div>

                            <!-- sensorMultiline -->
                            <div ng-switch-when="sensorMultiline">
                                <div class="widget-control control-left widget-click-popup">
                                    <span class="widget-level" ng-bind="v.level"></span> <span ng-show="v.scaleTitle" ng-bind="v.scaleTitle"></span> <i class="fa fa-caret-down"></i>
                                </div>

                                <div class="widget-control control-right">
                                    <div class="btn-group">
                                        <button class="btn btn-default btn-sm" ng-click="runCmd(v.id + '/command/update')"> <i class="fa fa-clock-o"></i> <span class="widget-update-time">{{v.updateTime|isToday:true}}</span></button>
                                    </div>
                                </div><!-- /.widget-control .right -->
                            </div>

                            <!-- thermostat -->
                            <div class="widget-control control-left widget-click-popup" ng-switch-when="thermostat"><strong>{{levelVal[v.id]}} <span ng-show="v.scaleTitle" ng-bind="v.scaleTitle"></span></strong> <i class="fa fa-caret-down"></i></div>
                            <!-- switchMultilevelLinear -->
                            <div class="widget-click-popup" ng-switch-when="switchMultilevelLinear"><strong>{{v.level}} <span ng-show="v.scaleTitle" ng-bind="v.scaleTitle"></span></strong> <i class="fa fa-caret-down"></i></div>
                            <!-- camera -->
                            <div class="text-right"><a href="" class="btn btn-primary" ng-switch-when="camera" ng-click="showModal('#modal_camera', v)"><i class="fa fa-play"></i></a></div>

                            <!-- text -->
                            <div ng-switch-when="text">
                                <div class="widget-control control-left widget-click-popup text">
                                    <a href="" ng-click="showModal('#modal_promo', {'type': v.deviceType, 'title': v.title, 'text': v.metrics.text, 'url': v.metrics.img})" ng-bind="v.metrics.text|cutText:true:60"></a>
                                </div>
                            </div>

                            <!-- Default -->
                            <div class="widget-control control-left widget-click-popup" ng-switch-default><span class="widget-level" ng-bind="v.level"></span> <span ng-show="v.scaleTitle" ng-bind="v.scaleTitle"></span></div>

                        </div><!-- /.widget-control-wrap --> 

                        <!-- Hidden switchMultilevel -->
                        <div class="col-sm-11 element-hidden hidden-switch-multilevel animate-show" ng-switch-when="switchMultilevel" ng-show="goHidden">
                            <div>
                                <p class="text-center">{{v.title}} </p>
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <!--<myknob knob-data="v.level" knob-options="knobopt"></myknob> -->
                                                <input 
                                                    type="text" 
                                                    id="knob_{{v.id}}"
                                                    value="{{levelVal[v.id]|getMaxLevel}}" 
                                                    class="dial widget-level-knob" 
                                                    data-width="100" 
                                                    data-height="100" 
                                                    data-min="0"
                                                    data-max="99" 
                                                    knob-id="v.id" 
                                                    knob-data="v.level" 
                                                    knob-options="knobopt" 
                                                    ng-model="levelVal[v.id]" myknob />  
                                                <!--<input type="text" value="v.level" class="dial" data-width="100" data-height="100" ng-model="levelVal[v.id]" knob /> -->  
                                            </td>
                                            <td>
                                                <button class="btn btn-primary"
                                                        data-ng-click="runCmdExact(v.id, '+', 1, 99)"
                                                        >
                                                    <i class="fa fa-angle-up fa-lg"></i>
                                                </button>&nbsp;
                                                <button class="btn btn-info"
                                                        data-ng-click="runCmdExact(v.id, 255, 0, 255)"
                                                        ><i class="fa fa-angle-double-up fa-lg"></i>
                                                </button><br /><br />
                                                <button class="btn btn-primary"
                                                        data-ng-click="runCmdExact(v.id, '-', 1, 99)"
                                                        ><i class="fa fa-angle-down fa-lg"></i>
                                                </button>&nbsp;
                                                <button class="btn btn-info"
                                                        data-ng-click="runCmdExact(v.id, 0, 0, 255)"
                                                        >
                                                    <i class="fa fa-angle-double-down fa-lg"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <button class="btn btn-info"
                                                        data-ng-click="runCmdExact(v.id, 99, 0, 99)"
                                                        ng-bind="_t('lb_full')">
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Hidden thermostat -->
                        <div class="col-sm-11 element-hidden thermostat" ng-switch-when="thermostat" ng-show="goHidden">
                            <div>
                                <p class="text-center">{{v.title}} </p>
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <!--<myknob knob-data="v.level" knob-options="knobopt"></myknob> -->
                                                <input 
                                                    type="text" 
                                                    value="v.level" 
                                                    class="dial" 
                                                    data-width="100" 
                                                    data-height="100" 
                                                    data-min="5"
                                                    data-max="40" 
                                                    knob-id="v.id" 
                                                    knob-data="v.level" 
                                                    knob-options="knobopt" 
                                                    ng-model="levelVal[v.id]" myknob />  
                                                <!--<input type="text" value="v.level" class="dial" data-width="100" data-height="100" ng-model="levelVal[v.id]" knob /> -->  
                                            </td>
                                            <td>
                                                <button class="btn btn-primary"
                                                        data-ng-click="runCmdExact(v.id, '+', 5, 40)"
                                                        >
                                                    <i class="fa fa-angle-up fa-lg"></i>
                                                </button>&nbsp;
                                                <button class="btn btn-info"
                                                        data-ng-click="runCmdExact(v.id, 40, 5, 40)"
                                                        ><i class="fa fa-angle-double-up fa-lg"></i>
                                                </button><br /><br />
                                                <button class="btn btn-primary"
                                                        data-ng-click="runCmdExact(v.id, '-', 5, 40)"
                                                        ><i class="fa fa-angle-down fa-lg"></i>
                                                </button>&nbsp;
                                                <button class="btn btn-info"
                                                        data-ng-click="runCmdExact(v.id, 5, 0, 40)"
                                                        >
                                                    <i class="fa fa-angle-double-down fa-lg"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Hidden sensorMultilevel -->
                         <!--<div class="col-sm-11 element-hidden hidden-history" ng-switch-when="sensorMultilevel" ng-show="goHidden">
                            <p class="text-center popup-title">{{v.title|cutText:true:30}}</p>
                            <div>
                                <canvas tc-chartjs-line chart-data="history[v.id]" chart-options="chartOptions" width="260" height="150"></canvas>
                            </div>
                        </div>-->

                        <!-- Hidden sensorMultiline -->
                        <div class="col-sm-11 element-hidden hidden-sensor-multiline"  ng-switch-when="sensorMultiline" ng-show="goHidden">
                            <!-- <a class="hidden-close" href="" ng-click="goHidden = false;"><i class="fa fa-times"></i></a>-->
                            <div class="text-center">
                                <h4>{{v.title}}, {{v.metrics.country}}</h4>
                                <img ng-src="{{v.metrics.flag}}">
                            </div>
                            <table class="table-condensed">
                                <tbody>
                                    <tr>
                                        <td><b>{{_t('lb_humidity')}}</b></td>
                                        <td><span ng-bind="v.metrics.zwaveOpenWeather.main.humidity"/><span> %</span></td>    
                                    </tr>
                                    <tr>
                                        <td><b>{{_t('lb_pressure')}}</b></td>
                                        <td><span ng-bind="v.metrics.zwaveOpenWeather.main.pressure"/><span> hPa</span></td>
                                    </tr>
                                    <tr>
                                        <td><b>{{_t('lb_weather')}}</b></td>
                                        <td><span ng-bind="v.metrics.zwaveOpenWeather.weather[0].description"/></td>
                                    </tr>
                                    <tr>
                                        <td><b>{{_t('lb_wind')}}</b></td>
                                        <td>
                                            <span ng-bind="v.metrics.zwaveOpenWeather.wind.speed | number:1"/><span> m/s</span> 
                                            <!-- Choose correct wind direction -->
                                            <span ng-if="v.metrics.zwaveOpenWeather.wind.deg === 0">{{_t('lb_n')}}</span>
                                            <span ng-if="0 < v.metrics.zwaveOpenWeather.wind.deg < 45">{{_t('lb_ne')}}</span>
                                            <span ng-if="v.metrics.zwaveOpenWeather.wind.deg === 90">{{_t('lb_e')}}</span>
                                            <span ng-if="90 < v.metrics.zwaveOpenWeather.wind.deg < 180">{{_t('lb_se')}}</span>
                                            <span ng-if="v.metrics.zwaveOpenWeather.wind.deg === 180">{{_t('lb_s')}}</span>
                                            <span ng-if="180 < v.metrics.zwaveOpenWeather.wind.deg < 270">{{_t('lb_sw')}}</span>
                                            <span ng-if="v.metrics.zwaveOpenWeather.wind.speed === 270">{{_t('lb_w')}}</span>
                                            <span ng-if="270 < v.metrics.zwaveOpenWeather.wind.deg < 360">{{_t('lb_nw')}}</span>
                                            <!-- Wind dirction in degree -->
                                            (<span ng-bind="v.metrics.zwaveOpenWeather.wind.deg | number:0"/><span>Â°</span>)
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><b>{{_t('lb_last_update')}}</b></td>
                                        <td>{{v.updateTime|isToday:true}}</td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>


                        <!-- Hidden switchMultilevelLinear -->
                        <div class="col-sm-11 element-hidden hidden-sensor-multilevel-linear" ng-switch-when="switchMultilevelLinear" ng-show="goHidden">
                            <p class="text-center">{{v.title}} </p>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div range-slider min="0" orientation_="vertical" max="100" model-max="slider.modelMax" pin-handle="min"></div>
                                        </td>
                                        <td>
                                            <a class="btn btn-primary" href=""><i class="fa fa-angle-up fa-lg"></i></a>&nbsp;<a class="btn btn-info" href=""><i class="fa fa-angle-double-up fa-lg"></i></a><br /><br />
                                            <a class="btn btn-primary" href=""><i class="fa fa-angle-down fa-lg"></i></a>&nbsp;<a class="btn btn-info" href=""><i class="fa fa-angle-double-down fa-lg"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.panel-body -->
                </div>
            </div>


        </div><!-- /.col -->
    </div>

    <!-- Modal widget config -->
    <div class="modal modal-vertical-centered fade" id="modal_widget" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"><span ng-bind="_t('lb_cfg_view')"></span> <span ng-bind="input.title"></span></h4>
                </div>
                <div class="modal-body">
                    <fieldset class="widget-cfg-block">
                        <div class="form-group">
                            <label for="title" ng-bind="_t('lb_element_name')"></label>
                            <input name="title" id="title" type="text" class="form-control" value="{{input.title}}" placeholder="Element name" ng-model="input.title" />
                        </div>
                    </fieldset>
                    <fieldset class="widget-cfg-block">
                        <h4>{{_t('lb_configuration')}}</h4>

                        <div class="form-group" ng-show="input.cfg.hasInstance">
                            <span ng-bind="_t('lb_gen_by_module')"></span> <button href="#module/put/{{input.cfg.hasInstance.id}}" class="btn btn-default btn-sm" ng-click="toModule(input.cfg.hasInstance.id, '#modal_widget')" ng-bind="input.cfg.hasInstance.moduleId"></button>
                        </div>
                        <div class="form-group" ng-show="input.cfg.zwaveId">
                            <div ng-show="cfg.app_type == 'web'">
                                <span ng-bind="_t('lb_gen_by')"></span> <a href="/expert/#/config/configuration/{{input.cfg.zwaveId}}" class="btn btn-default btn-sm">Z-Wave device #{{input.cfg.zwaveId}}</a>
                            </div>
                            <div class="alert alert-warning" ng-show="cfg.app_type == 'app'">
                                <span ng-bind="_t('lb_gen_by')"></span> <span ng-bind="_t('lb_zwave_device')"></span> <strong>#{{input.cfg.zwaveId}}</strong> {{_t('lb_no_link')}}
                            </div>

                        </div>
                        <div class="form-group">
                            <input type="checkbox" name="dashboard" value="{{input.dashboard}}" id="dashboard" ng-model="input.dashboard" ng-checked="input.dashboard" /> <label ng-bind="_t('lb_add_dashboard')"></label>
                            &nbsp;&nbsp;<input type="checkbox" name="permanently_hidden" id="permanently_hidden" value="" 
                                               ng-model="input.permanently_hidden" 
                                               ng-checked="input.permanently_hidden" 
                                               ng-confirm-click="This means that you can never use this element again. Are you sure?" /> <label ng-bind="_t('lb_permanently_hide')"></label>
                        </div>
                    </fieldset>
                    <fieldset class="widget-cfg-block">
                        <div class="form-group">
                            <h4 ng-bind="_t('lb_tags')"></h4>
                            <div class="btn-device" id="tag_{{$index}}" ng-repeat="t in input.tags">{{t}} 
                                <a href="" ng-click="removeTag($index)"><i class="fa fa-times text-danger"></i></a>
                            </div>
                        </div>
                        <div class="form-group form-inline">
                            <input name="add_tag" id="add_tag" type="text" class="form-control" value="" placeholder="{{_t('lb_add_tag')}}" ng-model="addNewTag" />
                            <button type="button" class="btn btn-default" ng-click="addTag(addNewTag)"><i class="fa fa-plus text-success"></i></button>
                        </div>
                    </fieldset>
                    <fieldset class="widget-cfg-block">

                        <div class="form-group">
                            <h4 ng-bind="_t('lb_assign_room')"></h4>
                            <select class="form-control" ng-model="input.location">
                                <!-- <option value="">--- Select one ---</option>-->
                                <option ng-repeat="v in rooms" ng-selected="input.location == v.id" value="{{v.id}}" ng-bind="v.title"></option>
                            </select>
                        </div>
                    </fieldset>

                </div>
                <div class="modal-footer">
                    <button type="button" 
                            class="btn btn-primary" 
                            data-dismiss="modal"
                            ng-click="store(input)">{{_t('lb_save')}}</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{_t('lb_cancel')}}</button>
                </div>
            </div>
        </div>
    </div><!-- /.Modal -->
    
    <!-- Modal promo -->
    <div class="modal modal-vertical-centered fade" id="modal_promo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-center" ng-class="{'text-widget-modal': input.type == 'text'}">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" ng-bind="input.title"></h4>
                        </div>
                        <div class="modal-body">
                            <img class="widget-promo-image" ng-show="input.url" ng-src="{{input.url}}" alt="input.title"/>
                            <div class="widget-promo-text" ng-bind="input.text"></div>
                        </div>
                    </div>
                </div>
    </div><!-- /.Modal -->

    <!-- Modal camera -->
    <div class="modal modal-vertical-centered fade" id="modal_camera" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="table_"><div class="table-cell_">
                <div class="modal-dialog modal-dialog-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" ng-bind="input.title"></h4>
                        </div>
                        <div class="modal-body">
                            <p class="text-center element-camera-control">
                                <a href="" ng-click="runCmd(input.id + '/command/zoomIn')" ng-if="input.metrics.hasZoomIn"><i class="fa fa-search-plus fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/zoomOut')" ng-if="input.metrics.hasZoomOut"><i class="fa fa-search-minus fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/left')" ng-if="input.metrics.hasLeft"><i class="fa fa-arrow-circle-left fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/right')" ng-if="input.metrics.hasRight"><i class="fa fa-arrow-circle-right fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/up')" ng-if="input.metrics.hasUp"><i class="fa fa-arrow-circle-up fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/down')" ng-if="input.metrics.hasDown"><i class="fa fa-arrow-circle-down fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/open')" ng-if="input.metrics.hasOpen"><i class="fa fa-power-off fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                                <a href="" ng-click="runCmd(input.id + '/command/close')" ng-if="input.metrics.hasClose"><i class="fa fa-close fa-lg"></i></a>&nbsp;&nbsp;&nbsp;
                            </p>

                            <div class="camera-img">
                                <!--<img ng-src="storage/img/test.jpg">-->
                                <img class="text-center camera-img" src="{{input.metrics.url}}">
                            </div>

                        </div>
                    </div>
                </div>
            </div></div> <!-- /.Modal vertical align -->
    </div><!-- /.Modal -->



    <!-- Elements footer view -->
    <div id="footer" ng-show="showFooter">
        <div class="navbar navbar-default navbar-fixed-bottom">
            <div class="container">
                <div class="form-inline" role="form">
                    <div class="btn-group dropup">
                        <button type="button" class="btn btn-default" ng-bind="_t('lb_categories')"></button>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#elements" ng-bind="_t('lb_all')"></a></li>
                            <li ng-repeat="v in deviceType"><a href="#elements/deviceType/{{v.key}}" ng-bind="_t(v.key)"></a></li>
                        </ul>
                    </div>
                    <div class="btn-group dropup">
                        <button type="button" class="btn btn-default" ng-bind="_t('lb_tags')"></button>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#elements" ng-bind="_t('lb_all')"></a></li>
                            <li ng-repeat="v in tags"><a href="#elements/tags/{{v.key}}" ng-bind="v.key"></a></li>
                        </ul>
                    </div>
                    <div class="input-group search-form hide-on-mobile">
                        <input type="text" ng-model="q" class="form-control">
                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div> <!-- /ng-controller --> 